<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Atipicidades | Practica astasa</title>
  <meta name="description" content="5 Atipicidades | Practica astasa" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Atipicidades | Practica astasa" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Atipicidades | Practica astasa" />
  
  
  

<meta name="author" content="Esteban Ballestero Alfaro" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="una-mirada-a-los-datos.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="1" data-path="correlaciones-y-graficos-con-correlaciones.html"><a href="correlaciones-y-graficos-con-correlaciones.html"><i class="fa fa-check"></i><b>1</b> Correlaciones y graficos con correlaciones</a>
<ul>
<li class="chapter" data-level="1.1" data-path="correlaciones-y-graficos-con-correlaciones.html"><a href="correlaciones-y-graficos-con-correlaciones.html#qué-tipo-de-objeto-es-c"><i class="fa fa-check"></i><b>1.1</b> ¿Qué tipo de objeto es c?</a></li>
<li class="chapter" data-level="1.2" data-path="correlaciones-y-graficos-con-correlaciones.html"><a href="correlaciones-y-graficos-con-correlaciones.html#pasamos-a-la-sección-de-modelaje."><i class="fa fa-check"></i><b>1.2</b> Pasamos a la sección de modelaje.</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="practica-utilizando-astasa-anexos.html"><a href="practica-utilizando-astasa-anexos.html"><i class="fa fa-check"></i><b>2</b> Practica utilizando astasa (Anexos)</a></li>
<li class="chapter" data-level="3" data-path="exploración-de-datos.html"><a href="exploración-de-datos.html"><i class="fa fa-check"></i><b>3</b> Exploración de datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploración-de-datos.html"><a href="exploración-de-datos.html#qué-interesa-conocer-de-los-datos"><i class="fa fa-check"></i><b>3.1</b> ¿Qué interesa conocer de los datos?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="una-mirada-a-los-datos.html"><a href="una-mirada-a-los-datos.html"><i class="fa fa-check"></i><b>4</b> Una mirada a los datos</a></li>
<li class="chapter" data-level="5" data-path="atipicidades.html"><a href="atipicidades.html"><i class="fa fa-check"></i><b>5</b> Atipicidades</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Practica astasa</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="atipicidades" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Atipicidades<a href="atipicidades.html#atipicidades" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Para el estudio de las tipicidades, se echará mano de dos tipos de gráficos del paquete ggplot2: <em>Diagramas de caja</em> (<strong>boxplot</strong>) y <em>gráficos de violín</em> (<strong>Violinplot</strong>).</p>
<p>El paquete <code>ggplot2</code> es uno de los paquetes más completos que tiene R para generar gráficos diversos y de alta complejidad y calidad, el cuál trabaja bajo una filosofía de <em>Grammar of Graphs (Gramática de gráficos)</em> que permite contruir los gráficos a partir de capas.</p>
<p>Primeramente se crea el marco de trabajo base (Primera capa), el cuál al contener solo la base de datos cargada, no mostrará ningún elemento visual:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="atipicidades.html#cb79-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Month)) </span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<p>Ahora, se agrega una segunda capa de tipo <code>geom_boxplot</code></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="atipicidades.html#cb80-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Month,Ozone )) <span class="sc">+</span></span>
<span id="cb80-2"><a href="atipicidades.html#cb80-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> <span class="fu">cut_width</span>(Month, <span class="dv">1</span>)))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>En el gráfico anterior se puede notar que en el horizontal aparecen los meses dados por número de mes, pero podría ser interesante verlo con nombre del mes. El siguiente código crea una nueva columna en la base de datos con el nombre del mes</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="atipicidades.html#cb81-1" tabindex="-1"></a>aire<span class="sc">$</span>Mes <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">5</span>, <span class="st">&quot;Mayo&quot;</span>, </span>
<span id="cb81-2"><a href="atipicidades.html#cb81-2" tabindex="-1"></a>                   <span class="fu">ifelse</span> (aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">6</span>, <span class="st">&quot;Junio&quot;</span>, </span>
<span id="cb81-3"><a href="atipicidades.html#cb81-3" tabindex="-1"></a>                           <span class="fu">ifelse</span>(aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">7</span>,<span class="st">&quot;Julio&quot;</span>, </span>
<span id="cb81-4"><a href="atipicidades.html#cb81-4" tabindex="-1"></a>                                  <span class="fu">ifelse</span>(aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, <span class="st">&quot;Agosto&quot;</span>,<span class="st">&quot;Septiembre&quot;</span>)</span>
<span id="cb81-5"><a href="atipicidades.html#cb81-5" tabindex="-1"></a>                                  )</span>
<span id="cb81-6"><a href="atipicidades.html#cb81-6" tabindex="-1"></a>                           )</span>
<span id="cb81-7"><a href="atipicidades.html#cb81-7" tabindex="-1"></a>                   )</span>
<span id="cb81-8"><a href="atipicidades.html#cb81-8" tabindex="-1"></a></span>
<span id="cb81-9"><a href="atipicidades.html#cb81-9" tabindex="-1"></a>aire<span class="sc">$</span>Mes <span class="ot">&lt;-</span> <span class="fu">factor</span>(aire<span class="sc">$</span>Mes, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Mayo&quot;</span>,<span class="st">&quot;Junio&quot;</span>,<span class="st">&quot;Julio&quot;</span>,<span class="st">&quot;Agosto&quot;</span>,<span class="st">&quot;Septiembre&quot;</span>))</span></code></pre></div>
<p>Seguidamente crearemos el mismo diagrama de caja, pero usando la nueva columnna</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="atipicidades.html#cb82-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone)) <span class="sc">+</span> </span>
<span id="cb82-2"><a href="atipicidades.html#cb82-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">outlier.shape =</span> <span class="dv">19</span>) </span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>Los datos atípicos se muestran como puntos fuera de la caja, pero esa forma podría cambiar a gusto del usuario. En el siguiente enlace puede ver un compendio de variantes para la figura que podría usarse para representar los puntos en <code>R</code></p>
<p><a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">Figuras para puntos ggplot2</a></p>
<p>La siguiente variante del diagrama de caja puede ser más interesante:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="atipicidades.html#cb83-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone)) <span class="sc">+</span> </span>
<span id="cb83-2"><a href="atipicidades.html#cb83-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">outlier.shape =</span> <span class="dv">19</span>, <span class="at">outlier.color =</span> <span class="st">&quot;red&quot;</span>, <span class="fu">aes</span>(<span class="at">fill =</span> Month)) <span class="sc">+</span></span>
<span id="cb83-3"><a href="atipicidades.html#cb83-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-59-1.png" width="672" /></p>
<p>Agreguemos otros elementos importantes en un gráfico, como título:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="atipicidades.html#cb84-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone)) <span class="sc">+</span> </span>
<span id="cb84-2"><a href="atipicidades.html#cb84-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">outlier.shape =</span> <span class="dv">19</span>, <span class="at">outlier.color =</span> <span class="st">&quot;red&quot;</span>, <span class="fu">aes</span>(<span class="at">fill =</span> Month))<span class="sc">+</span></span>
<span id="cb84-3"><a href="atipicidades.html#cb84-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Media diaria de Ozono en ppm, por mes&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Roosevel Island según mes, del 1 de mayo al 30 de septiembre 1973&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Ozono&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<p>Otra variante interesante del diagrama de caja que se viene utilizando, es el <em>gráfico de violín</em> o <em>violin plot</em>, el cuál presenta la ventaja de que permite conocer la distribución de los datos durante el recorrido.</p>
<p>Antes de constuir nuestro primer <em>violin plot</em>, podemos simplificar el código almacenando instrucciones de uso frecuente, como seguidamente se muestra:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="atipicidades.html#cb85-1" tabindex="-1"></a><span class="co"># g1 es una variables que almacena la primera capa del gráfico a crear</span></span>
<span id="cb85-2"><a href="atipicidades.html#cb85-2" tabindex="-1"></a></span>
<span id="cb85-3"><a href="atipicidades.html#cb85-3" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone))</span></code></pre></div>
<p>Los <em>violinplot</em> son un tipo de función de densidad (density plot) para los datos vistos desde arriba.este gráfico se está prefiriendo sobre el <em>box plot</em>, porque permite ver en el recorrido la forma en que se agrupan o se concentran los datos. No es necesario, para efectos de publicación, presentarlo junto con la caja.</p>
<p>Seguidamente, se construye el <em>violin plot</em>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="atipicidades.html#cb86-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb86-2"><a href="atipicidades.html#cb86-2" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Month, <span class="at">alpha =</span> <span class="fl">0.3</span>))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-62-1.png" width="672" />
Se puede agregar los puntos para verlos superpuestos al violinplot:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="atipicidades.html#cb87-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb87-2"><a href="atipicidades.html#cb87-2" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb87-3"><a href="atipicidades.html#cb87-3" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Month, <span class="at">alpha =</span> <span class="fl">0.3</span>))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>Se puede superponer además con los <em>box plot</em>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="atipicidades.html#cb88-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb88-2"><a href="atipicidades.html#cb88-2" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb88-3"><a href="atipicidades.html#cb88-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb88-4"><a href="atipicidades.html#cb88-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">fill =</span> Month))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<p>En el siguiente código se propone crear algunas estadísticas para los datos agrupados: cantidad de datos, desviación estándar, error estándar y lo límites superior e inferior para el intervalo de confianza para dicha media, con el objetico de incluirlos dentro del gráfico que se viene trabajando.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="una-mirada-a-los-datos.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
