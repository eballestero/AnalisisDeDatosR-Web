<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Exploracion y Visualizacion de Datos | AnalisisdeDatos.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Exploracion y Visualizacion de Datos | AnalisisdeDatos.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Exploracion y Visualizacion de Datos | AnalisisdeDatos.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="practica-utilizando-astasa-anexos.html"/>
<link rel="next" href="modelos-lineales.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="introduccion.html"><a href="introduccion.html"><i class="fa fa-check"></i>Introduccion</a></li>
<li class="chapter" data-level="1" data-path="correlaciones-y-graficos-con-correlaciones.html"><a href="correlaciones-y-graficos-con-correlaciones.html"><i class="fa fa-check"></i><b>1</b> Correlaciones y graficos con correlaciones</a>
<ul>
<li class="chapter" data-level="1.1" data-path="correlaciones-y-graficos-con-correlaciones.html"><a href="correlaciones-y-graficos-con-correlaciones.html#que-tipo-de-objeto-es-c"><i class="fa fa-check"></i><b>1.1</b> ¿Que tipo de objeto es c?</a></li>
<li class="chapter" data-level="1.2" data-path="chapters/3-Day.html"><a href="#pasamos-a-la-secci%C3%B3n-de-modelaje."><i class="fa fa-check"></i><b>1.2</b> Pasamos a la sección de modelaje.</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="practica-utilizando-astasa-anexos.html"><a href="practica-utilizando-astasa-anexos.html"><i class="fa fa-check"></i><b>2</b> Practica utilizando astasa (Anexos)</a></li>
<li class="chapter" data-level="3" data-path="exploracion-y-visualizacion-de-datos.html"><a href="exploracion-y-visualizacion-de-datos.html"><i class="fa fa-check"></i><b>3</b> Exploracion y Visualizacion de Datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chapters/3-Day.html"><a href="#exploraci%C3%B3n-de-datos"><i class="fa fa-check"></i><b>3.1</b> Exploración de datos</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="exploracion-y-visualizacion-de-datos.html"><a href="exploracion-y-visualizacion-de-datos.html#que-interesa-conocer-de-los-datos"><i class="fa fa-check"></i><b>3.1.1</b> ¿Que interesa conocer de los datos?</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exploracion-y-visualizacion-de-datos.html"><a href="exploracion-y-visualizacion-de-datos.html#una-mirada-a-los-datos"><i class="fa fa-check"></i><b>3.2</b> Una mirada a los datos</a></li>
<li class="chapter" data-level="3.3" data-path="exploracion-y-visualizacion-de-datos.html"><a href="exploracion-y-visualizacion-de-datos.html#atipicidades"><i class="fa fa-check"></i><b>3.3</b> Atipicidades</a></li>
<li class="chapter" data-level="3.4" data-path="exploracion-y-visualizacion-de-datos.html"><a href="exploracion-y-visualizacion-de-datos.html#una-mirada-a-las-correlaciones"><i class="fa fa-check"></i><b>3.4</b> Una mirada a las correlaciones</a></li>
<li class="chapter" data-level="3.5" data-path="exploracion-y-visualizacion-de-datos.html"><a href="exploracion-y-visualizacion-de-datos.html#bases-para-la-regresion"><i class="fa fa-check"></i><b>3.5</b> Bases para la regresion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modelos-lineales.html"><a href="modelos-lineales.html"><i class="fa fa-check"></i><b>4</b> Modelos Lineales</a>
<ul>
<li class="chapter" data-level="4.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#modelo-lineal-general"><i class="fa fa-check"></i><b>4.1</b> Modelo lineal general</a></li>
<li class="chapter" data-level="4.2" data-path="modelos-lineales.html"><a href="modelos-lineales.html#que-es-un-modelo"><i class="fa fa-check"></i><b>4.2</b> ¿Que es un modelo?</a></li>
<li class="chapter" data-level="4.3" data-path="modelos-lineales.html"><a href="modelos-lineales.html#regresion-lineal-simple"><i class="fa fa-check"></i><b>4.3</b> Regresion lineal simple</a></li>
<li class="chapter" data-level="4.4" data-path="modelos-lineales.html"><a href="modelos-lineales.html#supuesto-de-normalidad"><i class="fa fa-check"></i><b>4.4</b> Supuesto de Normalidad</a></li>
<li class="chapter" data-level="4.5" data-path="modelos-lineales.html"><a href="modelos-lineales.html#supuesto-de-homocedasticidad-de-varianzas"><i class="fa fa-check"></i><b>4.5</b> Supuesto de Homocedasticidad de varianzas</a></li>
<li class="chapter" data-level="4.6" data-path="modelos-lineales.html"><a href="modelos-lineales.html#supuesto-de-independencia"><i class="fa fa-check"></i><b>4.6</b> Supuesto de Independencia</a></li>
<li class="chapter" data-level="4.7" data-path="modelos-lineales.html"><a href="modelos-lineales.html#tecnicas-para-corregir-la-heterocedasticidad-de-varianzas"><i class="fa fa-check"></i><b>4.7</b> Tecnicas para corregir la heterocedasticidad de varianzas</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="herramientas-para-visualizar-datos.html"><a href="herramientas-para-visualizar-datos.html"><i class="fa fa-check"></i><b>5</b> Herramientas para visualizar datos</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chapters/3-Day.html"><a href="#chunk-de-librer%C3%ADas"><i class="fa fa-check"></i><b>5.1</b> Chunk de librerías</a></li>
<li class="chapter" data-level="5.2" data-path="herramientas-para-visualizar-datos.html"><a href="herramientas-para-visualizar-datos.html#carga-de-la-base-de-datos"><i class="fa fa-check"></i><b>5.2</b> Carga de la base de datos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="visualizacion-de-datos-con-ggplot2.html"><a href="visualizacion-de-datos-con-ggplot2.html"><i class="fa fa-check"></i><b>6</b> Visualizacion de Datos con ggplot2</a></li>
<li class="chapter" data-level="7" data-path="graficos-de-barras.html"><a href="graficos-de-barras.html"><i class="fa fa-check"></i><b>7</b> Graficos de Barras</a>
<ul>
<li class="chapter" data-level="7.1" data-path="graficos-de-barras.html"><a href="graficos-de-barras.html#requerimientos"><i class="fa fa-check"></i><b>7.1</b> Requerimientos</a></li>
<li class="chapter" data-level="7.2" data-path="graficos-de-barras.html"><a href="graficos-de-barras.html#legend-siempre-nos-pide-los-siguientes-argumentos"><i class="fa fa-check"></i><b>7.2</b> legend() siempre nos pide los siguientes argumentos</a></li>
<li class="chapter" data-level="7.3" data-path="graficos-de-barras.html"><a href="graficos-de-barras.html#grafico-de-pastel"><i class="fa fa-check"></i><b>7.3</b> Grafico de pastel</a></li>
<li class="chapter" data-level="7.4" data-path="graficos-de-barras.html"><a href="graficos-de-barras.html#grafico-de-dona"><i class="fa fa-check"></i><b>7.4</b> Grafico de dona</a></li>
<li class="chapter" data-level="7.5" data-path="graficos-de-barras.html"><a href="graficos-de-barras.html#para-practicar"><i class="fa fa-check"></i><b>7.5</b> Para practicar</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="diagramas-de-cajas-boxplots.html"><a href="diagramas-de-cajas-boxplots.html"><i class="fa fa-check"></i><b>8</b> Diagramas de cajas (Boxplots)</a>
<ul>
<li class="chapter" data-level="8.1" data-path="chapters/3-Day.html"><a href="#chunk-para-librer%C3%ADas"><i class="fa fa-check"></i><b>8.1</b> Chunk para librerías</a></li>
<li class="chapter" data-level="8.2" data-path="diagramas-de-cajas-boxplots.html"><a href="diagramas-de-cajas-boxplots.html#pie-chart"><i class="fa fa-check"></i><b>8.2</b> Pie Chart</a></li>
<li class="chapter" data-level="8.3" data-path="diagramas-de-cajas-boxplots.html"><a href="diagramas-de-cajas-boxplots.html#paleta-de-colores"><i class="fa fa-check"></i><b>8.3</b> Paleta de colores</a></li>
<li class="chapter" data-level="8.4" data-path="diagramas-de-cajas-boxplots.html"><a href="diagramas-de-cajas-boxplots.html#diagrama-de-cajas"><i class="fa fa-check"></i><b>8.4</b> Diagrama de cajas</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exploracion-y-visualizacion-de-datos" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Exploracion y Visualizacion de Datos<a href="exploracion-y-visualizacion-de-datos.html#exploracion-y-visualizacion-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="exploración-de-datos" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Exploración de datos<a href="#exploraci%C3%B3n-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Una de las buenas prácticas que se recomienda implementar a la hora de analizar datos, es iniciar haciendo una mirada a estos de manera que desde el inicio, se pueda tener un visión general de la materia prima con la que se pretende trabajar.</p>
<div id="que-interesa-conocer-de-los-datos" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> ¿Que interesa conocer de los datos?<a href="exploracion-y-visualizacion-de-datos.html#que-interesa-conocer-de-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cada analista podría definir sus propias prioridades, pero posiblemente se pueda tener un consenso en lo siguiente: tipos de datos, las variables, datos atípicos, celdas vacías, tamaño de la base de datos, estructura general de la base de datos, entre otras.</p>
<p>En R podemos echar mano de varias herramientas exploratorias de consulta o de tipo gráficas, que rápidamente permiten tener ese panorama general.</p>
</div>
</div>
<div id="una-mirada-a-los-datos" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Una mirada a los datos<a href="exploracion-y-visualizacion-de-datos.html#una-mirada-a-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Primeramente creamos un primer chunk para cargar los paquetes o librerías de R requeridos para el trabajo con los datos:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="exploracion-y-visualizacion-de-datos.html#cb64-1" tabindex="-1"></a><span class="fu">library</span>(visdat) <span class="co"># Paquete con varias herramientas para visualizar datos</span></span>
<span id="cb64-2"><a href="exploracion-y-visualizacion-de-datos.html#cb64-2" tabindex="-1"></a><span class="fu">library</span>(DataExplorer) <span class="co">#Para usar la función plot_missing</span></span>
<span id="cb64-3"><a href="exploracion-y-visualizacion-de-datos.html#cb64-3" tabindex="-1"></a><span class="fu">library</span>(mosaicData) <span class="co"># Paquete que contiene bases de datos </span></span>
<span id="cb64-4"><a href="exploracion-y-visualizacion-de-datos.html#cb64-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># paquete graficador de alto desempeño</span></span>
<span id="cb64-5"><a href="exploracion-y-visualizacion-de-datos.html#cb64-5" tabindex="-1"></a><span class="fu">library</span>(colorspace) <span class="co"># Paleta de colores</span></span>
<span id="cb64-6"><a href="exploracion-y-visualizacion-de-datos.html#cb64-6" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co">#para usar funciones de ordenamiento, selección, agrupación</span></span>
<span id="cb64-7"><a href="exploracion-y-visualizacion-de-datos.html#cb64-7" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb64-8"><a href="exploracion-y-visualizacion-de-datos.html#cb64-8" tabindex="-1"></a><span class="fu">library</span>(tidyr) <span class="co"># para usar la función drop_na</span></span>
<span id="cb64-9"><a href="exploracion-y-visualizacion-de-datos.html#cb64-9" tabindex="-1"></a><span class="fu">library</span>(correlation) <span class="co"># para calcular correlaciones</span></span>
<span id="cb64-10"><a href="exploracion-y-visualizacion-de-datos.html#cb64-10" tabindex="-1"></a><span class="fu">library</span>(PerformanceAnalytics)</span>
<span id="cb64-11"><a href="exploracion-y-visualizacion-de-datos.html#cb64-11" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb64-12"><a href="exploracion-y-visualizacion-de-datos.html#cb64-12" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span></code></pre></div>
<p><code>R</code> posee algunas bases de datos de uso libre, de las cuáles en esta oportunidad se cargará la base de datos <em>airquality</em> la cuál contiene datos ambientales.</p>
<p>En <code>RStudio</code> podemos consultar la ayuda si se desea saber información sobre algún paquete, una función o alguna base de datos. La siguiente instrucción permite acceder a la ayuda para conocer cómo está cosntituida la base de datos <em>airquality</em>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="exploracion-y-visualizacion-de-datos.html#cb65-1" tabindex="-1"></a>?airquality</span></code></pre></div>
<p>Seguidamente se carga la base de datos:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="exploracion-y-visualizacion-de-datos.html#cb66-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;airquality&quot;</span>) <span class="co">#Base de datos con variables que estudian la calidad del aire</span></span></code></pre></div>
<p>Se puede ver un resumen sobre como está constituida dicha base de datos con las siguientes indicaciones:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="exploracion-y-visualizacion-de-datos.html#cb67-1" tabindex="-1"></a><span class="fu">head</span>(airquality)</span></code></pre></div>
<pre><code>##   Ozone Solar.R Wind Temp Month Day
## 1    41     190  7.4   67     5   1
## 2    36     118  8.0   72     5   2
## 3    12     149 12.6   74     5   3
## 4    18     313 11.5   62     5   4
## 5    NA      NA 14.3   56     5   5
## 6    28      NA 14.9   66     5   6</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="exploracion-y-visualizacion-de-datos.html#cb69-1" tabindex="-1"></a><span class="fu">summary</span>(airquality)</span></code></pre></div>
<pre><code>##      Ozone           Solar.R           Wind             Temp      
##  Min.   :  1.00   Min.   :  7.0   Min.   : 1.700   Min.   :56.00  
##  1st Qu.: 18.00   1st Qu.:115.8   1st Qu.: 7.400   1st Qu.:72.00  
##  Median : 31.50   Median :205.0   Median : 9.700   Median :79.00  
##  Mean   : 42.13   Mean   :185.9   Mean   : 9.958   Mean   :77.88  
##  3rd Qu.: 63.25   3rd Qu.:258.8   3rd Qu.:11.500   3rd Qu.:85.00  
##  Max.   :168.00   Max.   :334.0   Max.   :20.700   Max.   :97.00  
##  NA&#39;s   :37       NA&#39;s   :7                                       
##      Month            Day      
##  Min.   :5.000   Min.   : 1.0  
##  1st Qu.:6.000   1st Qu.: 8.0  
##  Median :7.000   Median :16.0  
##  Mean   :6.993   Mean   :15.8  
##  3rd Qu.:8.000   3rd Qu.:23.0  
##  Max.   :9.000   Max.   :31.0  
## </code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="exploracion-y-visualizacion-de-datos.html#cb71-1" tabindex="-1"></a><span class="fu">str</span>(airquality)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    153 obs. of  6 variables:
##  $ Ozone  : int  41 36 12 18 NA 28 23 19 8 NA ...
##  $ Solar.R: int  190 118 149 313 NA NA 299 99 19 194 ...
##  $ Wind   : num  7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...
##  $ Temp   : int  67 72 74 62 56 66 65 59 61 69 ...
##  $ Month  : int  5 5 5 5 5 5 5 5 5 5 ...
##  $ Day    : int  1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<p>Usando el paquete visdat, hacemos una exploración gráfica de la base de datos:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="exploracion-y-visualizacion-de-datos.html#cb73-1" tabindex="-1"></a><span class="fu">vis_dat</span>(airquality)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="exploracion-y-visualizacion-de-datos.html#cb74-1" tabindex="-1"></a><span class="fu">vis_guess</span>(airquality)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-53-1.png" width="672" /></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="exploracion-y-visualizacion-de-datos.html#cb75-1" tabindex="-1"></a><span class="fu">vis_miss</span>(airquality)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="exploracion-y-visualizacion-de-datos.html#cb76-1" tabindex="-1"></a><span class="fu">plot_missing</span>(airquality) <span class="co"># Me indica si tenemos datos en blanco y me da una recomendación, que en este caso dice que es &quot;Good y Ok&quot;, lo cual no es mucho problema</span></span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="exploracion-y-visualizacion-de-datos.html#cb77-1" tabindex="-1"></a><span class="co"># Use ?plot_missing() si desea conocer más sobre esta función</span></span></code></pre></div>
<p>Si se desea, se pueden omitir los datos NA, pero al implicar este procedimiento una modificación de la base de datos original, se recomienda crear una nueva variable de almacenamiento, como se muestra en el siguiente <code>chunk</code>:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="exploracion-y-visualizacion-de-datos.html#cb78-1" tabindex="-1"></a>aire <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(airquality)</span>
<span id="cb78-2"><a href="exploracion-y-visualizacion-de-datos.html#cb78-2" tabindex="-1"></a><span class="fu">vis_dat</span>(aire)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
</div>
<div id="atipicidades" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Atipicidades<a href="exploracion-y-visualizacion-de-datos.html#atipicidades" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para el estudio de las tipicidades, se echará mano de dos tipos de gráficos del paquete ggplot2: <em>Diagramas de caja</em> (<strong>boxplot</strong>) y <em>gráficos de violín</em> (<strong>Violinplot</strong>).</p>
<p>El paquete <code>ggplot2</code> es uno de los paquetes más completos que tiene R para generar gráficos diversos y de alta complejidad y calidad, el cuál trabaja bajo una filosofía de <em>Grammar of Graphs (Gramática de gráficos)</em> que permite contruir los gráficos a partir de capas.</p>
<p>Primeramente se crea el marco de trabajo base (Primera capa), el cuál al contener solo la base de datos cargada, no mostrará ningún elemento visual:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="exploracion-y-visualizacion-de-datos.html#cb79-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Month)) </span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>Ahora, se agrega una segunda capa de tipo <code>geom_boxplot</code></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="exploracion-y-visualizacion-de-datos.html#cb80-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Month,Ozone )) <span class="sc">+</span></span>
<span id="cb80-2"><a href="exploracion-y-visualizacion-de-datos.html#cb80-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> <span class="fu">cut_width</span>(Month, <span class="dv">1</span>)))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>En el gráfico anterior se puede notar que en el horizontal aparecen los meses dados por número de mes, pero podría ser interesante verlo con nombre del mes. El siguiente código crea una nueva columna en la base de datos con el nombre del mes</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="exploracion-y-visualizacion-de-datos.html#cb81-1" tabindex="-1"></a>aire<span class="sc">$</span>Mes <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">5</span>, <span class="st">&quot;Mayo&quot;</span>, </span>
<span id="cb81-2"><a href="exploracion-y-visualizacion-de-datos.html#cb81-2" tabindex="-1"></a>                   <span class="fu">ifelse</span> (aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">6</span>, <span class="st">&quot;Junio&quot;</span>, </span>
<span id="cb81-3"><a href="exploracion-y-visualizacion-de-datos.html#cb81-3" tabindex="-1"></a>                           <span class="fu">ifelse</span>(aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">7</span>,<span class="st">&quot;Julio&quot;</span>, </span>
<span id="cb81-4"><a href="exploracion-y-visualizacion-de-datos.html#cb81-4" tabindex="-1"></a>                                  <span class="fu">ifelse</span>(aire<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, <span class="st">&quot;Agosto&quot;</span>,<span class="st">&quot;Septiembre&quot;</span>)</span>
<span id="cb81-5"><a href="exploracion-y-visualizacion-de-datos.html#cb81-5" tabindex="-1"></a>                                  )</span>
<span id="cb81-6"><a href="exploracion-y-visualizacion-de-datos.html#cb81-6" tabindex="-1"></a>                           )</span>
<span id="cb81-7"><a href="exploracion-y-visualizacion-de-datos.html#cb81-7" tabindex="-1"></a>                   )</span>
<span id="cb81-8"><a href="exploracion-y-visualizacion-de-datos.html#cb81-8" tabindex="-1"></a></span>
<span id="cb81-9"><a href="exploracion-y-visualizacion-de-datos.html#cb81-9" tabindex="-1"></a>aire<span class="sc">$</span>Mes <span class="ot">&lt;-</span> <span class="fu">factor</span>(aire<span class="sc">$</span>Mes, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Mayo&quot;</span>,<span class="st">&quot;Junio&quot;</span>,<span class="st">&quot;Julio&quot;</span>,<span class="st">&quot;Agosto&quot;</span>,<span class="st">&quot;Septiembre&quot;</span>))</span></code></pre></div>
<p>Seguidamente crearemos el mismo diagrama de caja, pero usando la nueva columnna</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="exploracion-y-visualizacion-de-datos.html#cb82-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone)) <span class="sc">+</span> </span>
<span id="cb82-2"><a href="exploracion-y-visualizacion-de-datos.html#cb82-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">outlier.shape =</span> <span class="dv">19</span>) </span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<p>Los datos atípicos se muestran como puntos fuera de la caja, pero esa forma podría cambiar a gusto del usuario. En el siguiente enlace puede ver un compendio de variantes para la figura que podría usarse para representar los puntos en <code>R</code></p>
<p><a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">Figuras para puntos ggplot2</a></p>
<p>La siguiente variante del diagrama de caja puede ser más interesante:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="exploracion-y-visualizacion-de-datos.html#cb83-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone)) <span class="sc">+</span> </span>
<span id="cb83-2"><a href="exploracion-y-visualizacion-de-datos.html#cb83-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">outlier.shape =</span> <span class="dv">19</span>, <span class="at">outlier.color =</span> <span class="st">&quot;red&quot;</span>, <span class="fu">aes</span>(<span class="at">fill =</span> Month)) <span class="sc">+</span></span>
<span id="cb83-3"><a href="exploracion-y-visualizacion-de-datos.html#cb83-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>Agreguemos otros elementos importantes en un gráfico, como título:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="exploracion-y-visualizacion-de-datos.html#cb84-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone)) <span class="sc">+</span> </span>
<span id="cb84-2"><a href="exploracion-y-visualizacion-de-datos.html#cb84-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">outlier.shape =</span> <span class="dv">19</span>, <span class="at">outlier.color =</span> <span class="st">&quot;red&quot;</span>, <span class="fu">aes</span>(<span class="at">fill =</span> Month))<span class="sc">+</span></span>
<span id="cb84-3"><a href="exploracion-y-visualizacion-de-datos.html#cb84-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Media diaria de Ozono en ppm, por mes&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;Roosevel Island según mes, del 1 de mayo al 30 de septiembre 1973&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Ozono&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Otra variante interesante del diagrama de caja que se viene utilizando, es el <em>gráfico de violín</em> o <em>violin plot</em>, el cuál presenta la ventaja de que permite conocer la distribución de los datos durante el recorrido.</p>
<p>Antes de constuir nuestro primer <em>violin plot</em>, podemos simplificar el código almacenando instrucciones de uso frecuente, como seguidamente se muestra:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="exploracion-y-visualizacion-de-datos.html#cb85-1" tabindex="-1"></a><span class="co"># g1 es una variables que almacena la primera capa del gráfico a crear</span></span>
<span id="cb85-2"><a href="exploracion-y-visualizacion-de-datos.html#cb85-2" tabindex="-1"></a></span>
<span id="cb85-3"><a href="exploracion-y-visualizacion-de-datos.html#cb85-3" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes, Ozone))</span></code></pre></div>
<p>Los <em>violinplot</em> son un tipo de función de densidad (density plot) para los datos vistos desde arriba.este gráfico se está prefiriendo sobre el <em>box plot</em>, porque permite ver en el recorrido la forma en que se agrupan o se concentran los datos. No es necesario, para efectos de publicación, presentarlo junto con la caja.</p>
<p>Seguidamente, se construye el <em>violin plot</em>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="exploracion-y-visualizacion-de-datos.html#cb86-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb86-2"><a href="exploracion-y-visualizacion-de-datos.html#cb86-2" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Month, <span class="at">alpha =</span> <span class="fl">0.3</span>))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-64-1.png" width="672" />
Se puede agregar los puntos para verlos superpuestos al violinplot:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="exploracion-y-visualizacion-de-datos.html#cb87-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb87-2"><a href="exploracion-y-visualizacion-de-datos.html#cb87-2" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span></span>
<span id="cb87-3"><a href="exploracion-y-visualizacion-de-datos.html#cb87-3" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Month, <span class="at">alpha =</span> <span class="fl">0.3</span>))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p>Se puede superponer además con los <em>box plot</em>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="exploracion-y-visualizacion-de-datos.html#cb88-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb88-2"><a href="exploracion-y-visualizacion-de-datos.html#cb88-2" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb88-3"><a href="exploracion-y-visualizacion-de-datos.html#cb88-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb88-4"><a href="exploracion-y-visualizacion-de-datos.html#cb88-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">fill =</span> Month))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-66-1.png" width="672" /></p>
<p>En el siguiente código se propone crear algunas estadísticas para los datos agrupados: cantidad de datos, desviación estándar, error estándar y lo límites superior e inferior para el intervalo de confianza para dicha media, con el objetico de incluirlos dentro del gráfico que se viene trabajando.</p>
<p>Para este trabajo se utilizará el operador <em>pipe</em> <strong>%&gt;%</strong> que permite crear acciones anidadas:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="exploracion-y-visualizacion-de-datos.html#cb89-1" tabindex="-1"></a>est <span class="ot">&lt;-</span> aire <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="exploracion-y-visualizacion-de-datos.html#cb89-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Mes) <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="exploracion-y-visualizacion-de-datos.html#cb89-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(Ozone), </span>
<span id="cb89-4"><a href="exploracion-y-visualizacion-de-datos.html#cb89-4" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb89-5"><a href="exploracion-y-visualizacion-de-datos.html#cb89-5" tabindex="-1"></a>            <span class="at">de =</span> <span class="fu">sd</span>(Ozone),</span>
<span id="cb89-6"><a href="exploracion-y-visualizacion-de-datos.html#cb89-6" tabindex="-1"></a>            <span class="at">ee =</span> de<span class="sc">/</span><span class="fu">sqrt</span>(<span class="fu">n</span>()),</span>
<span id="cb89-7"><a href="exploracion-y-visualizacion-de-datos.html#cb89-7" tabindex="-1"></a>            <span class="at">li =</span> media <span class="sc">-</span> <span class="fl">1.96</span><span class="sc">*</span>ee,</span>
<span id="cb89-8"><a href="exploracion-y-visualizacion-de-datos.html#cb89-8" tabindex="-1"></a>            <span class="at">ls =</span> media <span class="sc">+</span><span class="fl">1.96</span><span class="sc">*</span>ee</span>
<span id="cb89-9"><a href="exploracion-y-visualizacion-de-datos.html#cb89-9" tabindex="-1"></a>            )</span>
<span id="cb89-10"><a href="exploracion-y-visualizacion-de-datos.html#cb89-10" tabindex="-1"></a>est</span></code></pre></div>
<pre><code>## # A tibble: 5 × 7
##   Mes        media     n    de    ee    li    ls
##   &lt;fct&gt;      &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Mayo        24.1    24  22.9  4.67  15.0  33.3
## 2 Junio       29.4     9  18.2  6.07  17.5  41.3
## 3 Julio       59.1    26  31.6  6.20  47.0  71.3
## 4 Agosto      60      23  41.8  8.71  42.9  77.1
## 5 Septiembre  31.4    29  24.1  4.48  22.7  40.2</code></pre>
<p>Se procede a incluir estas nuevas estadísticas al gráfico:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="exploracion-y-visualizacion-de-datos.html#cb91-1" tabindex="-1"></a>g1 <span class="sc">+</span> </span>
<span id="cb91-2"><a href="exploracion-y-visualizacion-de-datos.html#cb91-2" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb91-3"><a href="exploracion-y-visualizacion-de-datos.html#cb91-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb91-4"><a href="exploracion-y-visualizacion-de-datos.html#cb91-4" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>, <span class="at">fill =</span> Month)) <span class="sc">+</span></span>
<span id="cb91-5"><a href="exploracion-y-visualizacion-de-datos.html#cb91-5" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb91-6"><a href="exploracion-y-visualizacion-de-datos.html#cb91-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> est, <span class="fu">aes</span>(Mes, media)) <span class="sc">+</span></span>
<span id="cb91-7"><a href="exploracion-y-visualizacion-de-datos.html#cb91-7" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">data =</span> est, <span class="fu">aes</span>(Mes, media, <span class="at">ymin =</span> li, <span class="at">ymax =</span> ls), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">color =</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-68-1.png" width="672" /></p>
<p>Los <em>gráficos</em> de barras y una variante conocida como <em>lollipops</em> podrín ser útiles en el conteo de datos:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="exploracion-y-visualizacion-de-datos.html#cb92-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Mes)) <span class="sc">+</span> </span>
<span id="cb92-2"><a href="exploracion-y-visualizacion-de-datos.html#cb92-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Month))</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-69-1.png" width="672" /></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="exploracion-y-visualizacion-de-datos.html#cb93-1" tabindex="-1"></a>mescont <span class="ot">&lt;-</span> aire <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="exploracion-y-visualizacion-de-datos.html#cb93-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Mes) <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="exploracion-y-visualizacion-de-datos.html#cb93-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">conteo =</span> <span class="fu">n</span>() )</span>
<span id="cb93-4"><a href="exploracion-y-visualizacion-de-datos.html#cb93-4" tabindex="-1"></a></span>
<span id="cb93-5"><a href="exploracion-y-visualizacion-de-datos.html#cb93-5" tabindex="-1"></a><span class="fu">ggplot</span>(mescont, <span class="fu">aes</span>(Mes, conteo)) <span class="sc">+</span> </span>
<span id="cb93-6"><a href="exploracion-y-visualizacion-de-datos.html#cb93-6" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="at">width =</span> <span class="fl">0.015</span>) <span class="sc">+</span> </span>
<span id="cb93-7"><a href="exploracion-y-visualizacion-de-datos.html#cb93-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;darkorange&quot;</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb93-8"><a href="exploracion-y-visualizacion-de-datos.html#cb93-8" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> conteo), <span class="at">size =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
</div>
<div id="una-mirada-a-las-correlaciones" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Una mirada a las correlaciones<a href="exploracion-y-visualizacion-de-datos.html#una-mirada-a-las-correlaciones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>R</code> permite constuir matrices gráficas con información variada de los datos, como por ejemplo los gráficos de densidad, gráfico de dispersión y correlaciones que facilitan ese acercamiento a la base de datos a trabajar.</p>
<p>Este gráfico se construye con el paquete GGally:</p>
<p>ggpairs(datos[filas, c(“Columna 1”, “Columna2”,…, “Columna n”)])</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="exploracion-y-visualizacion-de-datos.html#cb94-1" tabindex="-1"></a><span class="fu">ggpairs</span>(aire[, <span class="fu">c</span>(<span class="st">&quot;Ozone&quot;</span>, <span class="st">&quot;Solar.R&quot;</span>,<span class="st">&quot;Wind&quot;</span>, <span class="st">&quot;Temp&quot;</span>)])</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-71-1.png" width="672" /></p>
<p>Veamos otras opciones de matrices de gráficos de resumen de datos usando los paquetes <code>peformanceanalitycs</code> y <code>psych</code>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="exploracion-y-visualizacion-de-datos.html#cb95-1" tabindex="-1"></a><span class="fu">chart.Correlation</span>(aire[, <span class="fu">c</span>(<span class="st">&quot;Ozone&quot;</span>, <span class="st">&quot;Solar.R&quot;</span>,<span class="st">&quot;Wind&quot;</span>, <span class="st">&quot;Temp&quot;</span>)], <span class="at">histogram=</span><span class="cn">TRUE</span>, <span class="at">pch=</span><span class="dv">19</span>)</span></code></pre></div>
<pre><code>## Warning in par(usr): argument 1 does not name a graphical parameter
## Warning in par(usr): argument 1 does not name a graphical parameter
## Warning in par(usr): argument 1 does not name a graphical parameter
## Warning in par(usr): argument 1 does not name a graphical parameter
## Warning in par(usr): argument 1 does not name a graphical parameter
## Warning in par(usr): argument 1 does not name a graphical parameter</code></pre>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-72-1.png" width="672" /></p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="exploracion-y-visualizacion-de-datos.html#cb97-1" tabindex="-1"></a><span class="fu">pairs.panels</span>(aire[, <span class="fu">c</span>(<span class="st">&quot;Ozone&quot;</span>, <span class="st">&quot;Solar.R&quot;</span>,<span class="st">&quot;Wind&quot;</span>, <span class="st">&quot;Temp&quot;</span>)], <span class="at">scale=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-73-1.png" width="672" /></p>
<p>Seguidamente se hace un análisis para las correlaciones, la idea es ver si entre las variables numéricas presentes existe algún tipo de correlación fuerte.</p>
<p>Primeramente, trabajaremos con la base de datos original, es decir, sin la nueva columna creada para el Mes:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="exploracion-y-visualizacion-de-datos.html#cb98-1" tabindex="-1"></a>calidadaire <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(airquality)</span>
<span id="cb98-2"><a href="exploracion-y-visualizacion-de-datos.html#cb98-2" tabindex="-1"></a><span class="fu">head</span>(calidadaire)</span></code></pre></div>
<pre><code>##   Ozone Solar.R Wind Temp Month Day
## 1    41     190  7.4   67     5   1
## 2    36     118  8.0   72     5   2
## 3    12     149 12.6   74     5   3
## 4    18     313 11.5   62     5   4
## 7    23     299  8.6   65     5   7
## 8    19      99 13.8   59     5   8</code></pre>
<p>Podemos usar el operador <em>pipe</em> para filtar nuestra base de datos, como se muestra acontinuación:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="exploracion-y-visualizacion-de-datos.html#cb100-1" tabindex="-1"></a>calidadaire <span class="ot">&lt;-</span> airquality <span class="sc">%&gt;%</span> <span class="co"># se indica cuál es la base de datos usada</span></span>
<span id="cb100-2"><a href="exploracion-y-visualizacion-de-datos.html#cb100-2" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> <span class="co"># se eliminan los na, toda la fila</span></span>
<span id="cb100-3"><a href="exploracion-y-visualizacion-de-datos.html#cb100-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Month, Day)) <span class="co"># eliminamos las columnas Month y Day</span></span></code></pre></div>
<p>Es importante explicar el significado de la instrucción <code>dplyr::select</code>.</p>
<p>Ocurre con frecuencia en <code>R</code> que muchos paquetes podrían tener una función con el mismo nombre, entonces, cuando se llama a la función, que en este ejemplo es <strong>select</strong>, y queremos que sea <strong>select</strong> del paquete <code>dplyr</code> específicamente y no de otro paquete, entonces se debe indicar el nombre del paquete seguido por el operardor <strong>::</strong> y luego la función a usar.</p>
<p>Note que los datos ya no contienen las celdas vacías ni tampoco las columnas de <em>Month</em> y <em>Day</em>.</p>
<p>Es importante tomar en cuenta que la correlación lineal es una métrica sobre la relación lineal entre dos variables, no es un modelo como si lo es una regresión lineal.</p>
<p>Hay varias formas de ver las correlaciones en <code>R</code>, seguidamente se presentan varias opciones:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="exploracion-y-visualizacion-de-datos.html#cb101-1" tabindex="-1"></a>cor <span class="ot">&lt;-</span> <span class="fu">correlation</span>(calidadaire)</span>
<span id="cb101-2"><a href="exploracion-y-visualizacion-de-datos.html#cb101-2" tabindex="-1"></a>cor</span></code></pre></div>
<pre><code>## # Correlation Matrix (pearson-method)
## 
## Parameter1 | Parameter2 |     r |         95% CI | t(109) |         p
## ---------------------------------------------------------------------
## Ozone      |    Solar.R |  0.35 | [ 0.17,  0.50] |   3.88 | &lt; .001***
## Ozone      |       Wind | -0.61 | [-0.72, -0.48] |  -8.09 | &lt; .001***
## Ozone      |       Temp |  0.70 | [ 0.59,  0.78] |  10.19 | &lt; .001***
## Solar.R    |       Wind | -0.13 | [-0.31,  0.06] |  -1.34 | 0.183    
## Solar.R    |       Temp |  0.29 | [ 0.11,  0.46] |   3.21 | 0.003**  
## Wind       |       Temp | -0.50 | [-0.63, -0.34] |  -5.98 | &lt; .001***
## 
## p-value adjustment method: Holm (1979)
## Observations: 111</code></pre>
<p>Podríamos resumir esta tabla:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="exploracion-y-visualizacion-de-datos.html#cb103-1" tabindex="-1"></a><span class="fu">summary</span>(cor)</span></code></pre></div>
<pre><code>## # Correlation Matrix (pearson-method)
## 
## Parameter |     Temp |     Wind | Solar.R
## -----------------------------------------
## Ozone     |  0.70*** | -0.61*** | 0.35***
## Solar.R   |   0.29** |    -0.13 |        
## Wind      | -0.50*** |          |        
## 
## p-value adjustment method: Holm (1979)</code></pre>
<p>Graficar los datos de la matriz resultante de la correlación es posible, pero primero se debe organizar la infomración para que la función <em>plot</em> puede interpretarlos correctamente. Note que el resultado anterior del <em>summary</em> muestra una matriz triangular, pero el comando <em>plot</em> necesita que esta matriz sea cuadrada para poder graficar correctamente.</p>
<p>La siguiente instrucción, permite hacer cuadrada la matriz de correlaciones:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="exploracion-y-visualizacion-de-datos.html#cb105-1" tabindex="-1"></a><span class="fu">summary</span>(cor, <span class="at">redundant =</span> T)</span></code></pre></div>
<pre><code>## # Correlation Matrix (pearson-method)
## 
## Parameter |    Ozone | Solar.R |     Wind |     Temp
## ----------------------------------------------------
## Ozone     |          | 0.35*** | -0.61*** |  0.70***
## Solar.R   |  0.35*** |         |    -0.13 |   0.29**
## Wind      | -0.61*** |   -0.13 |          | -0.50***
## Temp      |  0.70*** |  0.29** | -0.50*** |         
## 
## p-value adjustment method: Holm (1979)</code></pre>
<p>Se podría graficar de la siguiente manera:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="exploracion-y-visualizacion-de-datos.html#cb107-1" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">summary</span>(cor, <span class="at">redundant =</span> T), <span class="at">show_value =</span> T, <span class="at">show_p =</span> T)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<p>Una forma más elegante de hacer este gráfico, es a partir del operador <em>pipe</em>:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="exploracion-y-visualizacion-de-datos.html#cb108-1" tabindex="-1"></a>cor <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="exploracion-y-visualizacion-de-datos.html#cb108-2" tabindex="-1"></a>  <span class="fu">summary</span>(<span class="at">redundant =</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb108-3"><a href="exploracion-y-visualizacion-de-datos.html#cb108-3" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">show_value =</span> T, <span class="at">show_p  =</span> T)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-80-1.png" width="672" /></p>
<p>Se puede cambiar la forma de la geometría:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="exploracion-y-visualizacion-de-datos.html#cb109-1" tabindex="-1"></a>cor <span class="sc">%&gt;%</span></span>
<span id="cb109-2"><a href="exploracion-y-visualizacion-de-datos.html#cb109-2" tabindex="-1"></a>  <span class="fu">summary</span>(<span class="at">redundant =</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb109-3"><a href="exploracion-y-visualizacion-de-datos.html#cb109-3" tabindex="-1"></a>  <span class="fu">plot</span>(<span class="at">show_value =</span> T, <span class="at">show_p  =</span> T, <span class="at">type =</span> <span class="st">&quot;tile&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-81-1.png" width="672" /></p>
<p>El siguiente gráfico de correlación se base en un modelo gaussiano, requiere el paquete <code>ggraph</code></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="exploracion-y-visualizacion-de-datos.html#cb110-1" tabindex="-1"></a>calidadaire  <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="exploracion-y-visualizacion-de-datos.html#cb110-2" tabindex="-1"></a>  <span class="fu">correlation</span>(<span class="at">partial =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="exploracion-y-visualizacion-de-datos.html#cb110-3" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-82-1.png" width="672" /></p>
</div>
<div id="bases-para-la-regresion" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Bases para la regresion<a href="exploracion-y-visualizacion-de-datos.html#bases-para-la-regresion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="exploracion-y-visualizacion-de-datos.html#cb111-1" tabindex="-1"></a><span class="fu">ggplot</span>(calidadaire, <span class="fu">aes</span>(Solar.R, Temp)) <span class="sc">+</span></span>
<span id="cb111-2"><a href="exploracion-y-visualizacion-de-datos.html#cb111-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-83-1.png" width="672" /></p>
<p>Con la capa stat_smooth se puede trazar una curva de mejor ajuste para los datos</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="exploracion-y-visualizacion-de-datos.html#cb112-1" tabindex="-1"></a><span class="fu">ggplot</span>(calidadaire, <span class="fu">aes</span>(Solar.R, Temp)) <span class="sc">+</span></span>
<span id="cb112-2"><a href="exploracion-y-visualizacion-de-datos.html#cb112-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb112-3"><a href="exploracion-y-visualizacion-de-datos.html#cb112-3" tabindex="-1"></a>  <span class="fu">stat_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<p>Esta opción de smooth es una ayuda al ojo para encontrar patrones en los datos.</p>
<p>Se puede usar el método lm para comparar entre el partrón anterior y como se vería una ajuste lineal:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="exploracion-y-visualizacion-de-datos.html#cb114-1" tabindex="-1"></a><span class="fu">ggplot</span>(calidadaire, <span class="fu">aes</span>(Solar.R, Temp)) <span class="sc">+</span></span>
<span id="cb114-2"><a href="exploracion-y-visualizacion-de-datos.html#cb114-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb114-3"><a href="exploracion-y-visualizacion-de-datos.html#cb114-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb114-4"><a href="exploracion-y-visualizacion-de-datos.html#cb114-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
<p>Similarmente, comparemos las variables Solar.R y Wind:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="exploracion-y-visualizacion-de-datos.html#cb116-1" tabindex="-1"></a><span class="fu">ggplot</span>(calidadaire, <span class="fu">aes</span>(Solar.R, Wind)) <span class="sc">+</span></span>
<span id="cb116-2"><a href="exploracion-y-visualizacion-de-datos.html#cb116-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb116-3"><a href="exploracion-y-visualizacion-de-datos.html#cb116-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb116-4"><a href="exploracion-y-visualizacion-de-datos.html#cb116-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-86-1.png" width="672" />
Otra forma de ver sl gráfico:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="exploracion-y-visualizacion-de-datos.html#cb117-1" tabindex="-1"></a><span class="fu">ggplot</span>(aire, <span class="fu">aes</span>(Solar.R, Wind)) <span class="sc">+</span></span>
<span id="cb117-2"><a href="exploracion-y-visualizacion-de-datos.html#cb117-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Mes)) <span class="sc">+</span></span>
<span id="cb117-3"><a href="exploracion-y-visualizacion-de-datos.html#cb117-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb117-4"><a href="exploracion-y-visualizacion-de-datos.html#cb117-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisdeDatos_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>Recordemos la correlación entre estas dos variables:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="exploracion-y-visualizacion-de-datos.html#cb118-1" tabindex="-1"></a><span class="fu">cor_test</span>(calidadaire, <span class="st">&quot;Solar.R&quot;</span>, <span class="st">&quot;Wind&quot;</span>)</span></code></pre></div>
<pre><code>## Parameter1 | Parameter2 |     r |        95% CI | t(109) |     p
## ----------------------------------------------------------------
## Solar.R    |       Wind | -0.13 | [-0.31, 0.06] |  -1.34 | 0.183
## 
## Observations: 111</code></pre>
<p>Note que el IC contempla al valor cero, por lo que podría no haber correlación lineal.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="practica-utilizando-astasa-anexos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelos-lineales.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
